/* == malihu jquery thumbnail scroller plugin == Version: 2.0.3, License: MIT License (MIT) */ /* custom.. */
!function(t,e,a){var n,i="mThumbnailScroller",o={setTop:0,setLeft:0,type:"hover-50",axis:"x",speed:15,contentTouchScroll:25,markup:{buttonsPlaceholder:!1,buttonsHTML:{up:"SVG set 1",down:"SVG set 1",left:"SVG set 1",right:"SVG set 1"}},advanced:{autoExpandHorizontalScroll:!0,updateOnContentResize:!0,updateOnImageLoad:!0},theme:"none",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},r=0,l={},s=e.attachEvent&&!e.addEventListener?1:0,c=["mTS_disabled","mTS_destroyed","mTS_no_scroll"],d={init:function(e){var e=t.extend(!0,{},o,e),a=u.call(this);if(e.live){var n=e.liveSelector||this.selector||".mThumbnailScroller",i=t(n);if("off"===e.live)return void f(n);l[n]=setTimeout(function(){i.mThumbnailScroller(e),"once"===e.live&&i.length&&f(n)},500)}else f(n);return e.speed=0===e.speed?100:e.speed,h(e),t(a).each(function(){var a=t(this);if(!a.data("mTS")){a.data("mTS",{idx:++r,opt:e,html:null,overflowed:null,bindEvents:!1,tweenRunning:!1,langDir:a.css("direction"),cbOffsets:null,trigger:null});var n=a.data("mTS").opt,i=a.data("mts-axis"),o=a.data("mts-type"),l=a.data("mts-theme");i&&(n.axis=i),o&&(n.type=o),l&&(n.theme=l,h(n)),p.call(this),d.update.call(null,a)}})},update:function(e){var a=e||u.call(this);return t(a).each(function(){var e=t(this);if(e.data("mTS")){var a=e.data("mTS"),n=a.opt,i=t("#mTS_"+a.idx+"_container");if(!i.length)return;a.tweenRunning&&E(e),e.hasClass(c[0])&&e.removeClass(c[0]),e.hasClass(c[1])&&e.removeClass(c[1]),x.call(this),m.call(this),a.overflowed=g.call(this),y.call(this),b.call(this);var o=[i[0].offsetTop,i[0].offsetLeft];"x"!==n.axis&&(a.overflowed[0]?D(e,o[0].toString(),{dir:"y",dur:0,overwrite:"none"}):(w.call(this),"y"===n.axis?(D(e,"0",{dir:"y",dur:0,overwrite:"none"}),_.call(this)):"yx"===n.axis&&a.overflowed[1]&&D(e,o[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==n.axis&&(a.overflowed[1]?D(e,o[1].toString(),{dir:"x",dur:0,overwrite:"none"}):(w.call(this),"x"===n.axis?(D(e,"0",{dir:"x",dur:0,overwrite:"none"}),_.call(this)):"yx"===n.axis&&a.overflowed[0]&&D(e,o[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),a.overflowed[0]||a.overflowed[1]?e.removeClass(c[2]):e.addClass(c[2]),P.call(this)}})},scrollTo:function(e,a){if(void 0!==e&&null!=e){var n=u.call(this);return t(n).each(function(){var n=t(this);if(n.data("mTS")){var i=n.data("mTS"),o=i.opt,r={trigger:"external",speed:o.speed,duration:1e3,easing:"easeInOut",timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=t.extend(!0,{},r,a),s=B.call(this,e),c=l.duration?l.duration:7e3/(l.speed||1);s[0]=z.call(this,s[0],"y"),s[1]=z.call(this,s[1],"x"),l.dur=c>0&&c<17?17:c,setTimeout(function(){null!==s[0]&&void 0!==s[0]&&"x"!==o.axis&&i.overflowed[0]&&(l.dir="y",l.overwrite="all",D(n,-s[0].toString(),l)),null!==s[1]&&void 0!==s[1]&&"y"!==o.axis&&i.overflowed[1]&&(l.dir="x",l.overwrite="none",D(n,-s[1].toString(),l))},l.timeout)}})}},stop:function(){var e=u.call(this);return t(e).each(function(){var e=t(this);e.data("mTS")&&E(e)})},disable:function(e){var a=u.call(this);return t(a).each(function(){var a=t(this);if(a.data("mTS")){a.data("mTS").opt;P.call(this,"remove"),_.call(this),e&&w.call(this),y.call(this,!0),a.addClass(c[0])}})},destroy:function(){var e=u.call(this);return t(e).each(function(){var a=t(this);if(a.data("mTS")){var n=a.data("mTS"),o=n.opt,r=t("#mTS_"+n.idx),l=(t("#mTS_"+n.idx+"_container"),t("#mTS_"+n.idx+"_buttonUp,#mTS_"+n.idx+"_buttonDown,#mTS_"+n.idx+"_buttonLeft,#mTS_"+n.idx+"_buttonRight"));o.live&&f(e),P.call(this,"remove"),_.call(this),w.call(this),a.removeData("mTS"),V(this,"mts"),l.remove(),r.replaceWith(n.html),a.removeClass(i+" _mTS_"+n.idx+" mTS-"+o.theme+" "+c[2]+" "+c[0]).addClass(c[1])}})}},u=function(){return"object"!=typeof t(this)||t(this).length<1?".mThumbnailScroller":this},h=function(e){var a=["buttons-out"],n=["buttons-in"],i=["buttons-out"],o=["hover-classic"],r=["hover-full"];e.markup.buttonsPlaceholder=t.inArray(e.theme,a)>-1?"outside":e.markup.buttonsPlaceholder,e.markup.buttonsHTML=t.inArray(e.theme,n)>-1?{up:"SVG set 2",down:"SVG set 2",left:"SVG set 2",right:"SVG set 2"}:t.inArray(e.theme,i)>-1?{up:"SVG set 3",down:"SVG set 3",left:"SVG set 3",right:"SVG set 3"}:e.markup.buttonsHTML,e.type=t.inArray(e.theme,o)>-1?"hover-85":t.inArray(e.theme,r)>-1?"hover-precise":e.type,e.speed=t.inArray(e.theme,o)>-1?60:t.inArray(e.theme,r)>-1?10:e.speed},f=function(t){l[t]&&(clearTimeout(l[t]),V(l,t))},p=function(){var e=t(this),a=e.data("mTS"),n=a.opt,o="yx"===n.axis?"mTS_vertical_horizontal":"x"===n.axis?"mTS_horizontal":"mTS_vertical",r=n.markup.thumbnailsContainer||"ul",l=n.markup.thumbnailContainer||"li",s=n.markup.thumbnailElement||"img";if(a.html=e.children().clone(!0,!0),!e.find(r).length){var c=e.find("li").length?"<ul class='mTSAutoContainer' />":"<div class='mTSAutoContainer' />";e.wrapInner(c),r=".mTSAutoContainer"}n.setWidth&&e.css("width",n.setWidth),n.setHeight&&e.css("height",n.setHeight),n.setLeft="y"!==n.axis&&"rtl"===a.langDir?"-989999px":n.setLeft,e.addClass(i+" _mTS_"+a.idx+" mTS-"+n.theme).find(r).wrap("<div id='mTS_"+a.idx+"' class='mTSWrapper "+o+"' />").addClass("mTSContainer").attr("id","mTS_"+a.idx+"_container").css({position:"relative",top:n.setTop,left:n.setLeft}).find(l).addClass("mTSThumbContainer").find(s).addClass("mTSThumb"),v.call(this)},m=function(){var e=t(this).data("mTS"),a=e.opt,n=t("#mTS_"+e.idx+"_container");a.advanced.autoExpandHorizontalScroll&&"y"!==a.axis&&n.css({position:"absolute",width:"auto"}).wrap("<div class='mTS_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right)-Math.floor(n[0].getBoundingClientRect().left),position:"relative"}).unwrap()},v=function(){var e=t(this),a=e.data("mTS"),n=a.opt,o=n.markup.buttonsPlaceholder?"outside"===n.markup.buttonsPlaceholder?e:t(n.markup.buttonsPlaceholder):t("#mTS_"+a.idx),r=["<a href='#' id='mTS_"+a.idx+"_buttonUp' class='mTSButton mTSButtonUp'><span class='mTSButtonIconContainer'>"+T.call(this,"up")+"</span><em class='hidden'>이전</em></a>","<a href='#' id='mTS_"+a.idx+"_buttonDown' class='mTSButton mTSButtonDown'><span class='mTSButtonIconContainer'>"+T.call(this,"down")+"</span><em class='hidden'>다음</em></a>","<a href='#' id='mTS_"+a.idx+"_buttonLeft' class='mTSButton mTSButtonLeft'><span class='mTSButtonIconContainer'>"+T.call(this,"left")+"</span><em class='hidden'>이전</em></a>","<a href='#' id='mTS_"+a.idx+"_buttonRight' class='mTSButton mTSButtonRight'><span class='mTSButtonIconContainer'>"+T.call(this,"right")+"</span><em class='hidden'>다음</em></a>"];n.axis,n.axis;o.hasClass(i)&&"static"===o.css("position")&&o.css("position","relative"),-1!==n.type.indexOf("click")&&("x"!==n.axis&&o.append(r[0]+r[1]),"y"!==n.axis&&o.append(r[2]+r[3]))},T=function(e){var a=t(this).data("mTS").opt.markup.buttonsHTML,n="SVG set 1"===a[e]?0:"SVG set 2"===a[e]?1:"SVG set 3"===a[e]?2:"SVG set 4"===a[e]?3:"SVG set 5"===a[e]?4:null;switch(e){case"up":return null===n?a[e]:s?"&uarr;":S(a[e])[n][0];case"down":return null===n?a[e]:s?"&darr;":S(a[e])[n][1];case"left":return null===n?a[e]:s?"&larr;":S(a[e])[n][2];case"right":return null===n?a[e]:s?"&rarr;":S(a[e])[n][3]}},S=function(){var t="<svg version='1.1' viewBox='0 0 24 24' preserveAspectRatio='xMinYMin meet' class='mTSButtonIcon' focusable='false'><g><line stroke-width='1' x1='' y1='' x2='' y2='' stroke='#449FDB' opacity=''></line></g>",e="</svg>";return[[t+"<path d='M20.561 9.439l-7.5-7.5c-0.586-0.586-1.535-0.586-2.121 0l-7.5 7.5c-0.586 0.586-0.586 1.536 0 2.121s1.536 0.586 2.121 0l4.939-4.939v14.379c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5v-14.379l4.939 4.939c0.293 0.293 0.677 0.439 1.061 0.439s0.768-0.146 1.061-0.439c0.586-0.586 0.586-1.535 0-2.121z'></path>"+e,t+"<path d='M3.439 14.561l7.5 7.5c0.586 0.586 1.536 0.586 2.121 0l7.5-7.5c0.586-0.586 0.586-1.536 0-2.121s-1.536-0.586-2.121 0l-4.939 4.939v-14.379c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5v14.379l-4.939-4.939c-0.293-0.293-0.677-0.439-1.061-0.439s-0.768 0.146-1.061 0.439c-0.586 0.586-0.586 1.536 0 2.121z'></path>"+e,t+"<path d='M9.439 3.439l-7.5 7.5c-0.586 0.586-0.586 1.536 0 2.121l7.5 7.5c0.586 0.586 1.536 0.586 2.121 0s0.586-1.536 0-2.121l-4.939-4.939h14.379c0.828 0 1.5-0.672 1.5-1.5s-0.672-1.5-1.5-1.5h-14.379l4.939-4.939c0.293-0.293 0.439-0.677 0.439-1.061s-0.146-0.768-0.439-1.061c-0.586-0.586-1.536-0.586-2.121 0z'></path>"+e,t+"<path d='M14.561 20.561l7.5-7.5c0.586-0.586 0.586-1.536 0-2.121l-7.5-7.5c-0.586-0.586-1.536-0.586-2.121 0s-0.586 1.536 0 2.121l4.939 4.939h-14.379c-0.828 0-1.5 0.672-1.5 1.5s0.672 1.5 1.5 1.5h14.379l-4.939 4.939c-0.293 0.293-0.439 0.677-0.439 1.061s0.146 0.768 0.439 1.061c0.586 0.586 1.536 0.586 2.121 0z'></path>"+e],[t+"<path d='M18.58 13.724c-0.488-0.502-5.634-5.402-5.634-5.402-0.262-0.268-0.604-0.402-0.946-0.402-0.343 0-0.685 0.134-0.946 0.402 0 0-5.146 4.901-5.635 5.402-0.488 0.502-0.522 1.404 0 1.939 0.523 0.534 1.252 0.577 1.891 0l4.69-4.496 4.688 4.496c0.641 0.577 1.37 0.534 1.891 0 0.523-0.536 0.491-1.439 0-1.939z'</path>"+e,t+"<path d='M18.58 10.276c-0.488 0.502-5.634 5.404-5.634 5.404-0.262 0.268-0.604 0.401-0.946 0.401-0.343 0-0.685-0.133-0.946-0.401 0 0-5.146-4.902-5.635-5.404-0.488-0.502-0.522-1.403 0-1.939 0.523-0.535 1.252-0.577 1.891 0l4.69 4.498 4.688-4.496c0.641-0.577 1.37-0.535 1.891 0 0.523 0.535 0.491 1.438 0 1.938z'></path>"+e,t+"<path d='M13.724 5.419c-0.502 0.49-5.402 5.635-5.402 5.635-0.268 0.262-0.401 0.604-0.401 0.946s0.133 0.684 0.401 0.946c0 0 4.901 5.146 5.402 5.634 0.502 0.49 1.404 0.523 1.939 0 0.534-0.522 0.576-1.25-0.001-1.89l-4.496-4.69 4.496-4.69c0.577-0.641 0.535-1.369 0.001-1.891-0.536-0.522-1.439-0.49-1.939 0z'></path>"+e,t+"<path d='M10.276 5.419c0.502 0.49 5.402 5.635 5.402 5.635 0.269 0.262 0.402 0.604 0.402 0.946s-0.133 0.684-0.402 0.946c0 0-4.901 5.146-5.402 5.634-0.502 0.49-1.403 0.523-1.939 0-0.535-0.522-0.577-1.25 0-1.89l4.498-4.69-4.496-4.69c-0.577-0.641-0.535-1.369 0-1.891s1.438-0.49 1.938 0z'></path>"+e],[t+"<path d='M20.902 17.279c0.325 0.322 0.851 0.322 1.175 0 0.325-0.322 0.325-0.841 0-1.163l-9.49-9.396c-0.324-0.322-0.85-0.322-1.174 0l-9.49 9.396c-0.324 0.322-0.325 0.841 0 1.163s0.85 0.322 1.175 0l8.902-8.569 8.902 8.569z'></path>"+e,t+"<path d='M3.098 6.721c-0.325-0.322-0.851-0.322-1.175 0-0.324 0.32-0.324 0.841 0 1.163l9.49 9.396c0.325 0.322 0.85 0.322 1.175 0l9.49-9.396c0.324-0.322 0.325-0.841 0-1.163s-0.852-0.322-1.175-0.001l-8.903 8.569-8.902-8.568z'></path>"+e,t+"<path d='M17.279 20.902c0.322 0.325 0.322 0.85 0 1.175s-0.841 0.325-1.163 0l-9.396-9.488c-0.322-0.325-0.322-0.851 0-1.175l9.396-9.49c0.322-0.325 0.841-0.325 1.163 0s0.322 0.85 0 1.175l-8.568 8.902 8.568 8.902z'</path>"+e,t+"<path d='M6.72 20.902c-0.322 0.325-0.322 0.85 0 1.175s0.841 0.325 1.163 0l9.396-9.488c0.322-0.325 0.322-0.851 0-1.175l-9.396-9.49c-0.322-0.325-0.841-0.325-1.163 0s-0.322 0.85 0 1.175l8.568 8.902-8.568 8.902z'</path>"+e],[t+"<path d='M12 0l-12 12h7.5v12l9 0v-12h7.5z'></path>"+e,t+"<path d='M12 24l12-12h-7.5v-12l-9-0v12h-7.5z'></path>"+e,t+"<path d='M0 12l12 12v-7.5h12l0-9h-12v-7.5z'></path>"+e,t+"<path d='M24 12l-12-12v7.5h-12l-0 9h12v7.5z'></path>"+e],[t+"<path d='M6.48 16.8h11.040l-5.521-9.6z'></path>"+e,t+"<path d='M17.52 7.201l-11.040-0.001 5.52 9.6z'></path>"+e,t+"<path d='M16.799 6.48l0.001 11.040-9.6-5.52z'></path>"+e,t+"<path d='M7.201 6.48l-0.001 11.040 9.6-5.52z'></path>"+e]]},x=function(){var e=t(this),a=e.data("mTS"),n=(a.opt,t("#mTS_"+a.idx)),i=e.css("max-height"),o=-1!==i.indexOf("%"),r=e.css("box-sizing");if("none"!==i){var l=o?e.parent().height()*parseInt(i)/100:parseInt(i);"border-box"===r&&(l-=e.innerHeight()-e.height()+(e.outerHeight()-e.innerHeight())),n.css("max-height",Math.round(l))}},g=function(){var e=t(this).data("mTS"),a=t("#mTS_"+e.idx),n=t("#mTS_"+e.idx+"_container");return[n.height()>a.height(),n.width()>a.width()]},w=function(){var e=t(this),a=e.data("mTS"),n=a.opt,i=t("#mTS_"+a.idx),o=t("#mTS_"+a.idx+"_container");if(E(e),("x"!==n.axis&&!a.overflowed[0]||"y"===n.axis&&a.overflowed[0])&&o.css("top",0),"y"!==n.axis&&!a.overflowed[1]||"x"===n.axis&&a.overflowed[1]){var r="rtl"===a.langDir?i.width()-o.width():0;o.css("left",r)}},b=function(){var e=t(this).data("mTS"),a=e.opt;e.bindEvents||(a.contentTouchScroll&&O.call(this),-1!==a.type.indexOf("hover")?"hover-precise"===a.type?k.call(this):I.call(this):-1!==a.type.indexOf("click")&&L.call(this),e.bindEvents=!0)},_=function(){var e=t(this).data("mTS"),a="mTS_"+e.idx,n=t("#mTS_"+e.idx+",#mTS_"+e.idx+"_container,#mTS_"+e.idx+"_buttonUp,#mTS_"+e.idx+"_buttonDown,#mTS_"+e.idx+"_buttonLeft,#mTS_"+e.idx+"_buttonRight"),i=t("#mTS_"+e.idx+"_container");e.bindEvents&&(n.each(function(){t(this).unbind("."+a)}),clearTimeout(i[0].onCompleteTimeout),V(i[0],"onCompleteTimeout"),e.bindEvents=!1)},y=function(e,a,n){var i=t(this).data("mTS"),o=i.opt;if(-1!==o.type.indexOf("click")){n||(n=o.axis);var r=[t("#mTS_"+i.idx+"_buttonUp"),t("#mTS_"+i.idx+"_buttonDown"),t("#mTS_"+i.idx+"_buttonLeft"),t("#mTS_"+i.idx+"_buttonRight")];"x"!==n&&(!i.overflowed[0]||e||a?sel=1===a?[r[0],r[1]]:2===a?[r[1],r[0]]:[r[0].add(r[1]),null]:sel=[i.overflowed[1]?null:r[2].add(r[3]),r[0].add(r[1])]),"y"!==n&&(!i.overflowed[1]||e||a?sel=1===a?[r[2],r[3]]:2===a?[r[3],r[2]]:[r[2].add(r[3]),null]:sel=[i.overflowed[0]?null:r[0].add(r[1]),r[2].add(r[3])]),sel[0]&&sel[0].addClass("mTS-hidden"),sel[1]&&sel[1].removeClass("mTS-hidden")}},M=function(t){switch(t.type){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return[t.originalEvent.pageY,t.originalEvent.pageX];case"touchstart":case"touchmove":case"touchend":var e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];return[e.pageY,e.pageX];default:return[t.pageY,t.pageX]}},C=function(t){return n||-1!==t.type.indexOf("touch")||void 0!==t.pointerType&&(2===t.pointerType||"touch"===t.pointerType)?"touch":"mouse"},O=function(){function e(t,e){var a=[1.5*e,2*e,e/1.5,e/2];return t>90?e>4?a[0]:a[3]:t>60?e>3?a[3]:a[2]:t>30?e>8?a[1]:e>6?a[0]:e>4?e:a[2]:e>8?e:a[3]}function a(t,e,a,n,i){t&&D(m,-t.toString(),{dur:e,easing:a,dir:n,overwrite:i})}var i,o,r,l,s,c,d,u,h,f,p,m=t(this),v=m.data("mTS"),T=v.opt,S="mTS_"+v.idx,x=t("#mTS_"+v.idx),g=t("#mTS_"+v.idx+"_container"),w=[],b=[],_="yx"===T.axis?"none":"all",y=[];g.bind("touchstart."+S+" pointerdown."+S+" MSPointerDown."+S,function(t){if(q(t)){m.removeClass("mTS_touch_action");var e=g.offset();i=M(t)[0]-e.top,o=M(t)[1]-e.left,y=[M(t)[0],M(t)[1]]}}).bind("touchmove."+S+" pointermove."+S+" MSPointerMove."+S,function(t){if(q(t)){t.stopImmediatePropagation(),c=R();var e=x.offset(),n=M(t)[0]-e.top,r=M(t)[1]-e.left;if(w.push(n),b.push(r),y[2]=Math.abs(M(t)[0]-y[0]),y[3]=Math.abs(M(t)[1]-y[1]),v.overflowed[0])var l=x.height()-g.height(),s=i-n>0&&n-i>l&&2*y[3]<y[2];if(v.overflowed[1])var d=x.width()-g.width(),u=o-r>0&&r-o>d&&2*y[2]<y[3];s||u?t.preventDefault():m.addClass("mTS_touch_action"),f="yx"===T.axis?[i-n,o-r]:"x"===T.axis?[null,o-r]:[i-n,null],g[0].idleTimer=250,v.overflowed[0]&&a(f[0],0,"linearOut","y","all"),v.overflowed[1]&&a(f[1],0,"linearOut","x",_)}}),x.bind("touchstart."+S+" pointerdown."+S+" MSPointerDown."+S,function(t){if(q(t)){t.stopImmediatePropagation(),n=!0,E(m),s=R();var e=x.offset();r=M(t)[0]-e.top,l=M(t)[1]-e.left,w=[],b=[]}}).bind("touchend."+S+" pointerup."+S+" MSPointerUp."+S,function(t){if(q(t)){t.stopImmediatePropagation(),d=R();var n=x.offset(),i=M(t)[0]-n.top,o=M(t)[1]-n.left;if(!(d-c>30)){var m=(h=1e3/(d-s))<2.5,S=m?[w[w.length-2],b[b.length-2]]:[0,0];u=m?[i-S[0],o-S[1]]:[i-r,o-l];var y=[Math.abs(u[0]),Math.abs(u[1])];h=m?[Math.abs(u[0]/4),Math.abs(u[1]/4)]:[h,h];var C=[Math.abs(g[0].offsetTop)-u[0]*e(y[0]/h[0],h[0]),Math.abs(g[0].offsetLeft)-u[1]*e(y[1]/h[1],h[1])];f="yx"===T.axis?[C[0],C[1]]:"x"===T.axis?[null,C[1]]:[C[0],null],p=[4*y[0]+60*T.speed,4*y[1]+60*T.speed];var O=parseInt(T.contentTouchScroll)||0;f[0]=y[0]>O?f[0]:0,f[1]=y[1]>O?f[1]:0,v.overflowed[0]&&a(f[0],p[0],"easeOut","y",_),v.overflowed[1]&&a(f[1],p[1],"easeOut","x",_)}}})},k=function(){var a,n,i,o=t(this),r=o.data("mTS"),l=r.opt,s="mTS_"+r.idx,c=t("#mTS_"+r.idx),d=t("#mTS_"+r.idx+"_container"),u=e.navigator.pointerEnabled?"pointermove":e.navigator.msPointerEnabled?"MSPointerMove":"mousemove";c.bind(u+"."+s,function(t){if("touch"!==C(t.originalEvent||t)&&(r.overflowed[0]||r.overflowed[1])){t.preventDefault();var e=c.height(),s=d.height(),u=c.width(),h=d.width(),f=h/u*7e3/(l.speed||1);a=[M(t)[0]-c.offset().top,M(t)[1]-c.offset().left],n=[a[0]/c.height(),a[1]/c.width()],i=[Math.round(-(s-e)*n[0]),Math.round(-(h-u)*n[1])],"x"!==l.axis&&r.overflowed[0]&&D(o,i[0].toString(),{dir:"y",dur:f,easing:"easeOut"}),"y"!==l.axis&&r.overflowed[1]&&D(o,i[1].toString(),{dir:"x",dur:f,easing:"easeOut"})}})},I=function(){function a(){m[0].rAF||(r=e.requestAnimationFrame?e.requestAnimationFrame:function(t){return setTimeout(t,17)},m[0].rAF=r(o))}function i(){null!=m[0].rAF&&(e.requestAnimationFrame?e.cancelAnimationFrame(m[0].rAF):clearTimeout(m[0].rAF),clearTimeout(d),m[0].rAF=null)}function o(){if(!n){c=[s[0]+v[0].offsetTop,s[1]+v[0].offsetLeft];var t=[m.height()-v.height(),m.width()-v.width()];"x"!==f.axis&&h.overflowed[0]&&(c[0]=c[0]>0?0:c[0]<t[0]?t[0]:c[0],s[0]&&!b[0]&&D(u,c[0],{dir:"y",dur:0,easing:"linear"}),(c[0]>=0||c[0]<=t[0])&&(b[0]=1)),"y"!==f.axis&&h.overflowed[1]&&(c[1]=c[1]>0?0:c[1]<t[1]?t[1]:c[1],s[1]&&!b[1]&&D(u,c[1],{dir:"x",dur:0,easing:"linear"}),(c[1]>=0||c[1]<=t[1])&&(b[1]=1)),d=setTimeout(function(){m[0].rAF=r(o)},S)}}var r,l,s,c,d,u=t(this),h=u.data("mTS"),f=h.opt,p="mTS_"+h.idx,m=t("#mTS_"+h.idx),v=t("#mTS_"+h.idx+"_container"),T=e.navigator.pointerEnabled?["pointerover","pointermove","pointerout"]:e.navigator.msPointerEnabled?["MSPointerOver","MSPointerMove","MSPointerOut"]:["mouseenter","mousemove","mouseleave"],S=e.requestAnimationFrame?0:17,x=f.speed,g=parseInt(f.type.split("hover-")[1])||1,w=x*g/100,b=[0,0];m.bind(T[0]+"."+p,function(t){"touch"!==C(t.originalEvent||t)&&(h.overflowed[0]||h.overflowed[1])&&a()}).bind(T[1]+"."+p,function(t){"touch"!==C(t.originalEvent||t)&&(h.overflowed[0]||h.overflowed[1])&&(l=[M(t)[0]-m.offset().top,M(t)[1]-m.offset().left],(s=[Math.round(Math.cos(l[0]/m.height()*Math.PI)*x),Math.round(Math.cos(l[1]/m.width()*Math.PI)*x)])[0]=s[0]<=-w?s[0]+=w:s[0]>=w?s[0]-=w:s[0]=0,s[1]=s[1]<=-w?s[1]+=w:s[1]>=w?s[1]-=w:s[1]=0,b=[0,0])}).bind(T[2]+"."+p,function(t){"touch"!==C(t.originalEvent||t)&&(h.overflowed[0]||h.overflowed[1])&&i()})},L=function(){var e=t(this),a=e.data("mTS"),n=a.opt,i="mTS_"+a.idx,o=t("#mTS_"+a.idx),r=t("#mTS_"+a.idx+"_container"),l=[t("#mTS_"+a.idx+"_buttonUp"),t("#mTS_"+a.idx+"_buttonDown"),t("#mTS_"+a.idx+"_buttonLeft"),t("#mTS_"+a.idx+"_buttonRight")];l[0].add(l[1]).add(l[2]).add(l[3]).bind("click."+i,function(i){if(G(i)&&(a.overflowed[0]||a.overflowed[1])&&(i.preventDefault(),!a.tweenRunning)){if("x"!==n.axis&&a.overflowed[0]){var l=o.height(),s="click-thumb"===n.type?0:t(this).hasClass("mTSButtonUp")?"+=":t(this).hasClass("mTSButtonDown")?"-=":0;if("click-thumb"!==n.type)var c=parseInt(n.type.split("click-")[1])||1,u=s?[s+l*c/100,null]:0;else{var h=A.call(e[0])[0],f=A.call(e[0])[1];if(t(this).hasClass("mTSButtonDown"))u=f?f[0].offsetTop-parseInt(f.css("margin-bottom"))-l:989999;else if(t(this).hasClass("mTSButtonUp")){u=h?h[0].offsetTop-parseInt(h.css("margin-top")):0;if(0===r[0].offsetTop)return}}}if("y"!==n.axis&&a.overflowed[1]){var p=o.width(),s="click-thumb"===n.type?0:t(this).hasClass("mTSButtonLeft")?"+=":t(this).hasClass("mTSButtonRight")?"-=":0;if("click-thumb"!==n.type)var c=parseInt(n.type.split("click-")[1])||1,u=s?[null,s+p*c/100]:u;else{var h=A.call(e[0])[2],f=A.call(e[0])[3];if(t(this).hasClass("mTSButtonRight"))u=f?f[0].offsetLeft-parseInt(f.css("margin-right"))-p:989999;else if(t(this).hasClass("mTSButtonLeft")){u=h?h[0].offsetLeft-parseInt(h.css("margin-left")):0;if(0===r[0].offsetLeft)return}}}null!==u&&d.scrollTo.call(e[0],u,{duration:0})}})},A=function(){var e,a,n,i,o=t(this).data("mTS"),r=(o.opt,t("#mTS_"+o.idx+"_container")),l=t("#mTS_"+o.idx),s=r.find(".mTSThumbContainer");return s.each(function(){var o=t(this),c=[Math.round(o.offset().top-r.offset().top+r[0].offsetTop),Math.round(o.offset().left-r.offset().left+r[0].offsetLeft)];if(c[0]<=0-parseInt(o.css("margin-top")))e=0===c[0]?s.eq(o.index()-1):s.eq(o.index());else if(c[0]<=l.height()+parseInt(o.css("margin-bottom"))){var d=s.eq(o.index()+1);a=d.length?d:null}if(c[1]<=0-parseInt(o.css("margin-left")))n=0===c[1]?s.eq(o.index()-1):s.eq(o.index());else if(c[1]<=l.width()+parseInt(o.css("margin-right"))){var u=s.eq(o.index()+1);i=u.length?u:null}}),[e,a,n,i]},B=function(e){var a=t(this).data("mTS").opt,n=[];return"function"==typeof e&&(e=e()),e instanceof Array?n=e.length>1?[e[0],e[1]]:"x"===a.axis?[null,e[0]]:[e[0],null]:(n[0]=e.y?e.y:e.x||"x"===a.axis?null:e,n[1]=e.x?e.x:e.y||"y"===a.axis?null:e),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},z=function(e,a){if(null!=e&&void 0!==e){var n=t(this),i=n.data("mTS"),o=i.opt,r=t("#mTS_"+i.idx),l=t("#mTS_"+i.idx+"_container"),s=typeof e;a||(a="x"===o.axis?"x":"y");var c="x"===a?l.width():l.height(),u="x"===a?l.offset().left:l.offset().top,h="x"===a?l[0].offsetLeft:l[0].offsetTop,f="x"===a?"left":"top";switch(s){case"function":return e();case"object":if(e.nodeType)p="x"===a?t(e).offset().left:t(e).offset().top;else if(e.jquery){if(!e.length)return;var p="x"===a?e.offset().left:e.offset().top}return p-u;case"string":case"number":if(H(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(c*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(h-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var m=h+parseInt(e.split("+=")[1]);return m>=0?0:Math.abs(m)}if(-1!==e.indexOf("px")&&H(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(r.height()-l.height());if("right"===e)return Math.abs(r.width()-l.width());if("first"===e||"last"===e){var v=l.find(":"+e);return(p="x"===a?t(v).offset().left:t(v).offset().top)-u}return t(e).length?(p="x"===a?t(e).offset().left:t(e).offset().top)-u:(l.css(f,e),void d.update.call(null,n[0]))}}},P=function(e){function a(){clearTimeout(h[0].autoUpdate),0!==l.parents("html").length?h[0].autoUpdate=setTimeout(function(){if(c.advanced.updateOnSelectorChange&&(f=o())!==v)return r(),void(v=f);c.advanced.updateOnContentResize&&((p=[h.height(),h.width(),u.height(),u.width(),l.height(),l.width()])[0]===T[0]&&p[1]===T[1]&&p[2]===T[2]&&p[3]===T[3]&&p[4]===T[4]&&p[5]===T[5]||(r(),T=p)),c.advanced.updateOnImageLoad&&(m=n())!==S&&(h.find("img").each(function(){i(this.src)}),S=m),(c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&a()},60):l=null}function n(){var t=0;return c.advanced.updateOnImageLoad&&(t=h.find("img").length),t}function i(t){var e=new Image;e.onload=function(t,e){return function(){return e.apply(t,arguments)}}(e,function(){this.onload=null,r()}),e.src=t}function o(){!0===c.advanced.updateOnSelectorChange&&(c.advanced.updateOnSelectorChange="*");var e=0,a=h.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&a.length>0&&a.each(function(){e+=t(this).height()+t(this).width()}),e}function r(){clearTimeout(h[0].autoUpdate),d.update.call(null,l[0])}var l=t(this),s=l.data("mTS"),c=s.opt,u=t("#mTS_"+s.idx),h=t("#mTS_"+s.idx+"_container");if(e)return clearTimeout(h[0].autoUpdate),void V(h[0],"autoUpdate");var f,p,m,v=o(),T=[h.height(),h.width(),u.height(),u.width(),l.height(),l.width()],S=n();a()},E=function(e){var a=e.data("mTS");t("#mTS_"+a.idx+"_container").each(function(){U.call(this)})},D=function(e,a,n){function i(t){return l&&s.callbacks[t]&&"function"==typeof s.callbacks[t]}function o(){return[s.callbacks.alwaysTriggerOffsets||m>=v+S,s.callbacks.alwaysTriggerOffsets||m<=-x]}function r(){var t=[u[0].offsetTop,u[0].offsetLeft],a=[u.height(),u.width()],i=[d.height(),d.width()];e[0].mts={content:u,top:t[0],left:t[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(a[0])-i[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(a[1])-i[1])),direction:n.dir}}var l=e.data("mTS"),s=l.opt,c={trigger:"internal",dir:"y",easing:"easeOut",dur:60*s.speed,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=t.extend(c,n),d=t("#mTS_"+l.idx),u=t("#mTS_"+l.idx+"_container"),h=s.callbacks.onTotalScrollOffset?B.call(e,s.callbacks.onTotalScrollOffset):[0,0],f=s.callbacks.onTotalScrollBackOffset?B.call(e,s.callbacks.onTotalScrollBackOffset):[0,0];switch(l.trigger=n.trigger,0===d.scrollTop()&&0===d.scrollLeft()||d.scrollTop(0).scrollLeft(0),n.dir){case"x":var p="left",m=u[0].offsetLeft,v=d.width()-u.width(),T=a,S=h[1],x=f[1],g=S>0?S:0,w=x>0?x:0;break;case"y":var p="top",m=u[0].offsetTop,v=d.height()-u.height(),T=a,S=h[0],x=f[0],g=S>0?S:0,w=x>0?x:0}T>=0?(T=0,y.call(e,!1,1,n.dir)):T<=v?(T=v,y.call(e,!1,2,n.dir)):(T=T,y.call(e,!1,0,n.dir)),e[0].mts||(r(),i("onInit")&&s.callbacks.onInit.call(e[0])),clearTimeout(u[0].onCompleteTimeout),!l.tweenRunning&&(0===m&&T>=0||m===v&&T<=v)||F(u[0],p,Math.round(T),n.dur,n.easing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!l.tweenRunning&&(i("onScrollStart")&&(r(),s.callbacks.onScrollStart.call(e[0])),l.tweenRunning=!0,l.cbOffsets=o())},onUpdate:function(){n.callbacks&&n.onUpdate&&i("whileScrolling")&&(r(),s.callbacks.whileScrolling.call(e[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){"yx"===s.axis&&clearTimeout(u[0].onCompleteTimeout);var t=u[0].idleTimer||0;u[0].onCompleteTimeout=setTimeout(function(){i("onScroll")&&(r(),s.callbacks.onScroll.call(e[0])),i("onTotalScroll")&&T<=v+g&&l.cbOffsets[0]&&(r(),s.callbacks.onTotalScroll.call(e[0])),i("onTotalScrollBack")&&T>=-w&&l.cbOffsets[1]&&(r(),s.callbacks.onTotalScrollBack.call(e[0])),l.tweenRunning=!1,u[0].idleTimer=0},t)}}})},F=function(t,a,n,i,o,r,l){function s(){g.stop||(T||f.call(),T=R()-v,c(),T>=g.time&&(g.time=T>g.time?T+u-(T-g.time):T+u-1,g.time<T+1&&(g.time=T+1)),g.time<i?g.id=h(s):m.call())}function c(){i>0?(g.currVal=d(g.time,S,w,i,o),x[a]=Math.round(g.currVal)+"px"):x[a]=n+"px",p.call()}function d(t,e,a,n,i){switch(i){case"linear":return a*t/n+e;case"linearOut":return t/=n,t--,a*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return(t/=n/2)<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e);case"easeInOutStrong":return(t/=n/2)<1?a/2*Math.pow(2,10*(t-1))+e:(t--,a/2*(2-Math.pow(2,-10*t))+e);case"easeInOut":return(t/=n/2)<1?a/2*t*t*t+e:(t-=2,a/2*(t*t*t+2)+e);case"easeOutSmooth":return t/=n,t--,-a*(t*t*t*t-1)+e;case"easeOutStrong":return a*(1-Math.pow(2,-10*t/n))+e;case"easeOut":default:var o=(t/=n)*t,r=o*t;return e+a*(.499999999999997*r*o+-2.5*o*o+5.5*r+-6.5*o+4*t)}}t._mTween||(t._mTween={top:{},left:{}});var u,h,f=(l=l||{}).onStart||function(){},p=l.onUpdate||function(){},m=l.onComplete||function(){},v=R(),T=0,S=t.offsetTop,x=t.style,g=t._mTween[a];"left"===a&&(S=t.offsetLeft);var w=n-S;g.stop=0,"none"!==r&&null!=g.id&&(e.requestAnimationFrame?e.cancelAnimationFrame(g.id):clearTimeout(g.id),g.id=null),u=1e3/60,g.time=T+u,h=e.requestAnimationFrame?e.requestAnimationFrame:function(t){return c(),setTimeout(t,.01)},g.id=h(s)},R=function(){return e.performance&&e.performance.now?e.performance.now():e.performance&&e.performance.webkitNow?e.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},U=function(){var t=this;t._mTween||(t._mTween={top:{},left:{}});for(var a=["top","left"],n=0;n<a.length;n++){var i=a[n];t._mTween[i].id&&(e.requestAnimationFrame?e.cancelAnimationFrame(t._mTween[i].id):clearTimeout(t._mTween[i].id),t._mTween[i].id=null,t._mTween[i].stop=1)}},V=function(t,e){try{delete t[e]}catch(a){t[e]=null}},G=function(t){return!(t.which&&1!==t.which)},q=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},H=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};t.fn[i]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[i]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[i].defaults=o,e[i]=!0,t(e).load(function(){var e=t(".mThumbnailScroller"),a=[];if(e.length){e.each(function(){var e=t(this),n=e.data("mts-axis")||o.axis,i=e.data("mts-type")||o.type,r="auto-mTS-"+n+"-"+i+"-"+(e.data("mts-theme")||o.theme),l=[r,n,i];e.addClass(r),-1===t.inArray(r,a)&&a.push(l)});for(var n=0;n<a.length;n++)t("."+a[n][0])[i]({axis:a[n][1],type:a[n][2]})}})}(jQuery,window,document);